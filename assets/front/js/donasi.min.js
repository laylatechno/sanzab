$((function(){new Cleave(".input-number",{numeral:!0,numeralThousandsGroupStyle:"thousand"}),new Cleave(".input-phone-number",{phone:!0,phoneRegionCode:"ID"});$(".btn-submit").on("click",(function(e){e.preventDefault();const n=$(".form-donation"),r=$(this);n[0].checkValidity()?$.ajax({url:`${baseUrl}/donasi/payment_method`,data:n.serialize(),method:"POST",cache:!1,beforeSend:function(){$(".err-msg").text(""),r.prop("disabled",!0)},success:function(e){function n(e,n){$.ajax({url:`${baseUrl}/donasi/finish`,data:{data:n},method:"POST",cache:!1,beforeSend:function(){r.prop("disabled",!0)},success:function(e){!0===e.success&&(r.prop("disabled",!0).text("Redirect..."),location.href=`${baseUrl}/donasi/success/${e.transaction_id}`)}})}snap.pay(e,{onSuccess:function(e){n(0,e)},onPending:function(e){n(0,e)},onError:function(e){},onClose:function(n){$.ajax({url:`${baseUrl}/donasi/delete`,data:{snap_token:e},method:"POST",cache:!1,success:function(e){}})}})},error:function(e){e.responseJSON&&e.responseJSON.errors?($(".err-msg-jenis_donasi").text(e.responseJSON.errors.jenis_donasi),$(".err-msg-jumlah").text(e.responseJSON.errors.jumlah),$(".err-msg-keterangan").text(e.responseJSON.errors.keterangan),$(".err-msg-nama").text(e.responseJSON.errors.nama),$(".err-msg-nomor_handphone").text(e.responseJSON.errors.nomor_handphone),$(".err-msg-email").text(e.responseJSON.errors.email)):Swal.fire({icon:"error",title:"Terjadi Kesalahan",text:""})},complete:function(){r.prop("disabled",!1)}}):n[0].reportValidity()}))}));